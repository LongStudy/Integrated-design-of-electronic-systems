# Integrated-design-of-electronic-systems
HDU 电子系统综合设计 短学期

## 课程设计要求
课程要求我们设计一个基于STM32单片机实现一个数据采集系统，具有数据采集、显示、传输、存储、分析功能：
### 单片机系统：
	4个LED灯
	4个独立按键K1～K4
	1路模拟电压输入
	串口转USB接口
	IIC接口陀螺仪传感器
	IIC接口OLED显示屏
	WiFi通信模块
	10个预留IO端口
	5V USB或手机充电宝供电
### 上位机系统：
	安卓、网页APP或PC端上位机。
### 具体要求如下：
### 完成了以下基础要求：
一、 系统上电启动，4个LED灯闪烁1秒，OLED屏显示课程名称、学号、姓名，保持1秒后进入主界面，显示系统名称和功能菜单。通过K1、K2上下选择功能，K3确定进入功能界面。在所有功能界面，默认K4返回主界面。（10分）
附加要求：显示学号姓名之后，屏幕正中显示个人头像，个人头像需与真人相符，等待任意按键再进入主界面。（10分）

二、 功能1为系统测试界面，在OLED屏上以图片或图形符号方式显示4个LED灯状态、4个按键状态；以柱状图结合文字显示AD采样数据、陀螺仪传感器原始数据。单页显示不下时通过K1、K2上下翻页。K3按键可以开启/暂停一个简单的流水灯。（20分）

三、 功能2为陀螺仪姿态解算界面，OLED显示内容为陀螺仪当前6轴原始数据和解算出的姿态角数据（pitch俯仰角、roll横滚角和yaw航向角），单页显示不下时使用K1、K2上下翻页。（10分）
附加要求：使用K3按键进入陀螺仪控制状态，屏幕显示一个图形，该图形受陀螺仪姿态角控制，可实现水平方向和垂直方向的大小调节（最小8x8，最大32x32）。按任意按键返回（10分）

四、 功能3为呼吸灯控制界面，进入该界面后4个LED灯显示呼吸灯效果，可以用K1按键调节亮灯个数、K2按键调节呼吸频率、K3按键调节最大亮度。（10分）

五、 功能4为WiFi通信测试界面，进入该界面后检测WiFi模块是否正常，如正常则配置WiFi模块为STA+AP工作模式，OLED屏上显示AP的SSID名称，WiFi模块异常时OLED屏显示错误信息。配置完成后，手机或笔记本连接WiFi模块，K1按键设置模块连接手机或笔记本上的TCP服务器，并进入透传模式，屏幕显示接收到的最后一行字符串。K2按键向服务器发送一个字符串、K3按键退出透传模式。（10分）
附加要求：不更改短按键功能，通过长按键和组合键检测，实现连接服务器IP地址和端口可设置功能。（10分）

六、 设计PC端上位机软件，能接收单片机串口上传数据，并将数据帧中的有效数据提取出来显示在程序窗口中。显示内容包括：4个LED灯状态、4个按键状态、AD采样数据或采样电压值、陀螺仪6轴原始数据及解算姿态角度，通信协议参考最后串口协议。（20分，必做）

### 扩展功能：
### 完成了以下扩展功能：
扩展1：在上位机程序中绘制采样电压数据、陀螺仪6轴原始数据和姿态角数据的动态数据曲线。

扩展3：在下位机的OLED上绘制动态数据曲线。

扩展4：通过ESP8266连接onenet或阿里云等物联网，将AD采样数据和陀螺仪数据上传到物联网，最终可以在浏览器中查看上传数据。

扩展5：设计上位机程序或移动App可以读取下位机上传到物联网的数据，实现远程监测和控制功能。
